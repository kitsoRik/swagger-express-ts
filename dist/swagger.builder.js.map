{"version":3,"sources":["../../lib/swagger-express-ts-lib/src/swagger.builder.ts"],"names":[],"mappings":";;;AAOA,+BAAiC;AACjC,qDAAmD;AA8JnD,SAAgB,KAAK,CAAC,eAAwC;IAC1D,MAAM,CAAC,EAAE,CAAC,eAAe,EAAE,0BAA0B,CAAC,CAAC;IACvD,MAAM,CAAC,EAAE,CACL,eAAe,CAAC,IAAI,EACpB,kFAAkF,CACrF,CAAC;IACF,IAAI,eAAe,CAAC,QAAQ,EAAE;QAC1B,gCAAc,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;KACtE;IACD,IAAI,eAAe,CAAC,OAAO,EAAE;QACzB,gCAAc,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;KACpE;IACD,IAAI,eAAe,CAAC,IAAI,EAAE;QACtB,gCAAc,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;KAC9D;IACD,IAAI,eAAe,CAAC,OAAO,EAAE;QACzB,gCAAc,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;KACpE;IACD,IAAI,eAAe,CAAC,QAAQ,EAAE;QAC1B,gCAAc,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;KACtE;IACD,IAAI,eAAe,CAAC,QAAQ,EAAE;QAC1B,gCAAc,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;KACtE;IACD,IAAI,eAAe,CAAC,IAAI,EAAE;QACtB,gCAAc,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;KAC9D;IACD,IAAI,eAAe,CAAC,YAAY,EAAE;QAC9B,gCAAc,CAAC,WAAW,EAAE,CAAC,eAAe,CACxC,eAAe,CAAC,YAAY,CAC/B,CAAC;KACL;IACD,IAAI,eAAe,CAAC,mBAAmB,EAAE;QACrC,gCAAc,CAAC,WAAW,EAAE,CAAC,sBAAsB,CAC/C,eAAe,CAAC,mBAAmB,CACtC,CAAC;KACL;IACD,IAAI,eAAe,CAAC,MAAM,EAAE;QACxB,gCAAc,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;KACvE;IACD,IAAI,eAAe,CAAC,SAAS,EAAE;QAC3B,gCAAc,CAAC,WAAW,EAAE,CAAC,kBAAkB,CAC3C,eAAe,CAAC,SAAS,CAC5B,CAAC;KACL;IACD,gCAAc,CAAC,WAAW,EAAE,CAAC,YAAY,EAAE,CAAC;AAChD,CAAC;AA9CD,sBA8CC","file":"swagger.builder.js","sourcesContent":["import {\r\n    ISwaggerInfo,\r\n    ISwaggerDefinition,\r\n    ISwaggerDefinitionProperty,\r\n    ISwaggerExternalDocs,\r\n    ISwaggerOperationResponse,\r\n} from './i-swagger';\r\nimport * as assert from 'assert';\r\nimport { SwaggerService } from './swagger.service';\r\nimport { SwaggerDefinitionConstant } from './swagger-definition.constant';\r\nimport {\r\n    IApiOperationArgsBaseParameter,\r\n    IApiOperationArgsBaseResponse,\r\n} from './i-api-operation-args.base';\r\n\r\nexport interface ISwaggerBuildDefinitionModelPropertyType {\r\n    type?: string | ISwaggerBuildDefinitionModelPropertyType;\r\n}\r\n\r\nexport interface ISwaggerBuildDefinitionModelProperty {\r\n    /**\r\n     * Define type of property. Example: SwaggerDefinitionConstant.Definition.Property.Type.STRING\r\n     * Optional.\r\n     */\r\n    type?: string;\r\n\r\n    /**\r\n     * Define format of property. Example: SwaggerDefinitionConstant.Definition.Property.Format.INT_64\r\n     * Optional.\r\n     */\r\n    format?: string;\r\n\r\n    /**\r\n     * Define if property is required.\r\n     * Optional. Default is false.\r\n     */\r\n    required?: boolean;\r\n\r\n    /**\r\n     * Define model.\r\n     * Optional.\r\n     */\r\n    model?: string;\r\n\r\n    /**\r\n     * Define enum;\r\n     * Optional.\r\n     */\r\n    enum?: string[];\r\n\r\n    /**\r\n     * Define description.\r\n     * Optional.\r\n     */\r\n    description?: string;\r\n\r\n    /**\r\n     * Define type of item. Example: SwaggerDefinitionConstant.Definition.Property.Type.STRING\r\n     * Optional.\r\n     */\r\n    itemType?: string;\r\n\r\n    /**\r\n     * Define example.\r\n     */\r\n    example?: any[];\r\n}\r\n\r\nexport interface ISwaggerBuildDefinitionModel {\r\n    /**\r\n     * Define description.\r\n     */\r\n    description?: string;\r\n\r\n    /**\r\n     * Define all properties of model.\r\n     */\r\n    properties: { [key: string]: ISwaggerBuildDefinitionModelProperty };\r\n}\r\n\r\nexport interface ISwaggerSecurityDefinition {\r\n    /**\r\n     * Define type of security.\r\n     */\r\n    type: string;\r\n\r\n    /**\r\n     * Define where security set.\r\n     * Optional.\r\n     */\r\n    in?: string;\r\n\r\n    /**\r\n     * Define name of security.\r\n     * Optional.\r\n     */\r\n    name?: string;\r\n}\r\n\r\nexport interface ISwaggerBuildDefinition {\r\n    /**\r\n     * Base URL for all API.\r\n     * Optional. Default is \"/\".\r\n     */\r\n    basePath?: string;\r\n\r\n    /**\r\n     * Version Open API\r\n     * Optional.\r\n     */\r\n    openapi?: string;\r\n\r\n    /**\r\n     * Metadata.\r\n     */\r\n    info: ISwaggerInfo;\r\n\r\n    /**\r\n     * Define the MIME types supported by the API for consumes. The root-level definition can be overridden in individual operations.\r\n     * Optional. Default is SwaggerDefinition.Consume.JSON = \"application/json\".\r\n     */\r\n    consumes?: string[];\r\n\r\n    /**\r\n     * Define the MIME types supported by the API for produces. The root-level definition can be overridden in individual operations.\r\n     * Optional. Default is SwaggerDefinition.Produce.JSON = \"application/json\".\r\n     */\r\n    produces?: string[];\r\n\r\n    /**\r\n     * Define schemes.\r\n     * Optional. Default is SwaggerDefinition.Scheme.HTTP = \"http\".\r\n     */\r\n    schemes?: string[];\r\n\r\n    /**\r\n     * Define host.\r\n     * Optional.\r\n     */\r\n    host?: string;\r\n\r\n    /**\r\n     * Define All Definitions.\r\n     * Optional.\r\n     */\r\n    models?: { [key: string]: ISwaggerBuildDefinitionModel };\r\n\r\n    /**\r\n     * Define external doc\r\n     * Optional.\r\n     */\r\n    externalDocs?: ISwaggerExternalDocs;\r\n\r\n    /**\r\n     * Define security definitions list.\r\n     * Optional.\r\n     */\r\n    securityDefinitions?: { [key: string]: ISwaggerSecurityDefinition };\r\n\r\n    /**\r\n     * Define global responses.\r\n     * Optional.\r\n     */\r\n    responses?: { [key: string]: IApiOperationArgsBaseResponse };\r\n}\r\n\r\nexport function build(buildDefinition: ISwaggerBuildDefinition): void {\r\n    assert.ok(buildDefinition, 'Definition are required.');\r\n    assert.ok(\r\n        buildDefinition.info,\r\n        'Informations are required. Base is { title: \"Title of my API\", version: \"1.0.0\"}'\r\n    );\r\n    if (buildDefinition.basePath) {\r\n        SwaggerService.getInstance().setBasePath(buildDefinition.basePath);\r\n    }\r\n    if (buildDefinition.openapi) {\r\n        SwaggerService.getInstance().setOpenapi(buildDefinition.openapi);\r\n    }\r\n    if (buildDefinition.info) {\r\n        SwaggerService.getInstance().setInfo(buildDefinition.info);\r\n    }\r\n    if (buildDefinition.schemes) {\r\n        SwaggerService.getInstance().setSchemes(buildDefinition.schemes);\r\n    }\r\n    if (buildDefinition.produces) {\r\n        SwaggerService.getInstance().setProduces(buildDefinition.produces);\r\n    }\r\n    if (buildDefinition.consumes) {\r\n        SwaggerService.getInstance().setConsumes(buildDefinition.consumes);\r\n    }\r\n    if (buildDefinition.host) {\r\n        SwaggerService.getInstance().setHost(buildDefinition.host);\r\n    }\r\n    if (buildDefinition.externalDocs) {\r\n        SwaggerService.getInstance().setExternalDocs(\r\n            buildDefinition.externalDocs\r\n        );\r\n    }\r\n    if (buildDefinition.securityDefinitions) {\r\n        SwaggerService.getInstance().addSecurityDefinitions(\r\n            buildDefinition.securityDefinitions\r\n        );\r\n    }\r\n    if (buildDefinition.models) {\r\n        SwaggerService.getInstance().setDefinitions(buildDefinition.models);\r\n    }\r\n    if (buildDefinition.responses) {\r\n        SwaggerService.getInstance().setGlobalResponses(\r\n            buildDefinition.responses\r\n        );\r\n    }\r\n    SwaggerService.getInstance().buildSwagger();\r\n}\r\n"]}